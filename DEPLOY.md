# Инструкция по деплою на Vercel

## Деплой на Vercel

### 1. Установка Vercel CLI (если еще не установлен)

```bash
npm i -g vercel
```

### 2. Деплой

```bash
vercel
```

Или через веб-интерфейс:
1. Подключите репозиторий к Vercel
2. Vercel автоматически определит настройки из `vercel.json`

### 3. Переменные окружения

В настройках проекта Vercel (Settings → Environment Variables) добавьте переменную окружения:
- `API_URL` = `https://admin-doman-horizont.ru/api`

**Важно**: В Vite переменные окружения для клиентского кода должны начинаться с `VITE_`. Если переменная не работает, измените в `src/config.js` на `import.meta.env.VITE_API_URL` и добавьте переменную `VITE_API_URL` в Vercel.

## Конфигурация

Файл `vercel.json` настроен для:
- **SPA Fallback**: Все маршруты перенаправляются на `/index.html` для корректной работы React Router
- **Кэширование статических файлов**: Assets кэшируются на 1 год
- **Build команда**: `npm run build`
- **Output директория**: `dist`

## Важные моменты

- **SPA Fallback**: Конфигурация `vercel.json` использует `rewrites` для обработки всех маршрутов SPA
- **API запросы**: Убедитесь, что переменная окружения `API_URL` настроена правильно
- **Статические файлы**: Автоматически кэшируются Vercel

## Проверка работы

После деплоя проверьте:
- Главная страница: `https://your-app.vercel.app/`
- Страница логина: `https://your-app.vercel.app/login` (должна работать при перезагрузке)
- Другие маршруты: `/houses`, `/clients`, `/applications` и т.д.

## Локальная проверка билда

Перед деплоем можно проверить production билд локально:

```bash
npm run build
npm run preview
```

Затем откройте `http://localhost:5174` и проверьте работу всех маршрутов.

